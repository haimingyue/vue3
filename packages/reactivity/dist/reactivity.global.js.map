{
  "version": 3,
  "sources": ["../src/index.ts", "../src/effect.ts", "../../shared/src/index.ts", "../src/reactive.ts"],
  "sourcesContent": ["export { effect } from './effect'\nexport { reactive } from './reactive'\n", "export function effect () {\n\n}\n", "export const isObject = (value) => { \n    return typeof value === 'object' && value !== null;\n}", "import { isObject } from '@vue/shared'\n\n// \u7B2C\u4E00\u6B65\uFF1A\u5C06\u6570\u636E\u8F6C\u6362\u6210\u54CD\u5E94\u5F0F\u6570\u636E\n// 3. \u505A\u7F13\u5B58\uFF0CWeakMap\u4E0D\u4F1A\u5BFC\u81F4\u5185\u5B58\u6CC4\u9732\nconst reactiveMap = new WeakMap()\n// \u7B2C\u4E00\u6B21\u666E\u901A\u5BF9\u8C61\u4EE3\u7406\uFF0C\u53EF\u4EE5\u540C\u6B65new Proxy\u4EE3\u7406\n// \u4E0B\u4E00\u6B21\u4F20\u9012\u7684\u662FProxy\uFF0C\u770B\u4E00\u4E0B\u6709\u6CA1\u6709\u4EE3\u7406\u8FC7\uFF0C\u5982\u679C\u8BBF\u95EE\u8FD9\u4E2AProxy\uFF0C\u6709get\u65B9\u6CD5\u7684\u65F6\u5019\uFF0C\u8BF4\u660E\u5C31\u8BBF\u95EE\u8FC7\u4E86\nconst enum ReactiveFlags {\n    IS_REACTIVE = '__v_isReactive'\n}\n// reactive \u53EA\u80FD\u505A\u5BF9\u8C61\u7684\u4EE3\u7406\n// 1) \u540C\u4E00\u4E2A\u5BF9\u8C61\u591A\u6B21\u4EE3\u7406\uFF0C\u8FD4\u56DE\u540C\u4E00\u4E2A\u4EE3\u7406\n// 2) \u4EE3\u7406\u5BF9\u8C61\u88AB\u518D\u6B21\u4EE3\u7406\uFF0C\u53EF\u4EE5\u76F4\u63A5\u8FD4\u56DE\nexport function reactive (target) {\n    // 1. \u5148\u5224\u65AD\u4F20\u5165\u7684object\u662F\u4E0D\u662F\u5BF9\u8C61\n    if (!isObject(target)) return;\n    if (target[ReactiveFlags.IS_REACTIVE]) {\n        return target;\n    }\n    // 2. \u5E76\u6CA1\u6709\u91CD\u65B0\u5B9A\u4E49\u5C5E\u6027\uFF0C\u53EA\u662F\u4EE3\u7406\uFF0C\u5728\u53D6\u503C\u7684\u65F6\u5019\uFF0C\u8C03\u7528get\uFF0C\u5728\u8D4B\u503C\u7684\u65F6\u5019\uFF0C\u8C03\u7528set\n    let existingProxy = reactiveMap.get(target);\n    console.log('existingProxy', existingProxy)\n    if (existingProxy) {\n        console.log('\u6267\u884C')\n        return existingProxy;\n    }\n    const proxy = new Proxy(target, {\n        get (target, key, receiver) {\n            console.log(target)\n            console.log(key)\n            if (key === ReactiveFlags.IS_REACTIVE) {\n                return true;\n            }\n            // target:\n            // key:\n            // receiver: \u5F53\u524D\u7684\u4EE3\u7406\u5BF9\u8C61\uFF0C\u4FDD\u8BC1this\u7684\u6307\u5411\n            // \u53BB\u4EE3\u7406\u5BF9\u8C61\u4E0A\u53D6\u503C\uFF0C\u8D70get\n            // return target[key];\n            // \u8FD9\u91CC\u53EF\u4EE5\u76D1\u63A7\u5230\u7528\u6237\u53D6\u503C\n            return Reflect.get(target, key, receiver);\n        },\n        set (target, key, value, receiver) {\n            // \u53BB\u4EE3\u7406\u4E0A\u8BBE\u7F6E\u503C\uFF0C\u8D70set\n            // target[key] = value;\n            // \u8FD9\u91CC\u53EF\u4EE5\u76D1\u63A7\u5230\u7528\u6237\u8BBE\u7F6E\u503C\n            Reflect.set(target, key, value, receiver);\n            return true;\n        }\n    })\n    reactiveMap.set(target, proxy);\n    return proxy;\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAO,oBAAmB;AAAA,EAE1B;;;ACFO,MAAM,WAAW,CAAC,UAAU;AAC/B,WAAO,OAAO,UAAU,YAAY,UAAU;AAAA,EAClD;;;ACEA,MAAM,cAAc,oBAAI,QAAQ;AASzB,oBAAmB,QAAQ;AAE9B,QAAI,CAAC,SAAS,MAAM;AAAG;AACvB,QAAI,OAAO,qCAA4B;AACnC,aAAO;AAAA,IACX;AAEA,QAAI,gBAAgB,YAAY,IAAI,MAAM;AAC1C,YAAQ,IAAI,iBAAiB,aAAa;AAC1C,QAAI,eAAe;AACf,cAAQ,IAAI,cAAI;AAChB,aAAO;AAAA,IACX;AACA,UAAM,QAAQ,IAAI,MAAM,QAAQ;AAAA,MAC5B,IAAK,SAAQ,KAAK,UAAU;AACxB,gBAAQ,IAAI,OAAM;AAClB,gBAAQ,IAAI,GAAG;AACf,YAAI,QAAQ,oCAA2B;AACnC,iBAAO;AAAA,QACX;AAOA,eAAO,QAAQ,IAAI,SAAQ,KAAK,QAAQ;AAAA,MAC5C;AAAA,MACA,IAAK,SAAQ,KAAK,OAAO,UAAU;AAI/B,gBAAQ,IAAI,SAAQ,KAAK,OAAO,QAAQ;AACxC,eAAO;AAAA,MACX;AAAA,IACJ,CAAC;AACD,gBAAY,IAAI,QAAQ,KAAK;AAC7B,WAAO;AAAA,EACX;",
  "names": []
}
